# üß¨ Generics –≤ Go (Go 1.18+)

> Generics = –ø–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–∏—Å–∞—Ç—å **–æ–¥–∏–Ω –∞–ª–≥–æ—Ä–∏—Ç–º** –¥–ª—è **—Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤**, —Å–æ—Ö—Ä–∞–Ω—è—è **—Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**.

–í –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ —É —Ç–µ–±—è —ç—Ç–æ –ø—Ä—è–º–æ –≤—ã–¥–µ–ª–µ–Ω–æ –∫–∞–∫ ‚Äú–æ–±–æ–±—â—ë–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (Generics)‚Äù –∏ —á—Ç–æ –¥–æ 1.18 —á–∞—â–µ –≤—ã–∫—Ä—É—á–∏–≤–∞–ª–∏—Å—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏/`interface{}` (–∞ —ç—Ç–æ –Ω–µ—É–¥–æ–±–Ω–æ)

acbc5621-2c16-4c57-865d-fbabf32‚Ä¶

.

---

## üìå –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã

- [[Interfaces]]
    
- [[–ü—É—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (any)]]
    
- [[Type assertion –∏ type switch]]
    
- [[–°—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ Go]]
    
- [[–ú–µ—Ç–æ–¥—ã –≤ Go]]
    
- [[–ü–∞–∫–µ—Ç sort]]
    
- [[slices –∏ maps –ø–∞–∫–µ—Ç—ã]]
    
- [[–ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –≤ Go]]
    

---

# 1Ô∏è‚É£ –ó–∞—á–µ–º generics, –µ—Å–ª–∏ –µ—Å—Ç—å interface?

## –ë—ã–ª–æ (–¥–æ 1.18): —á–µ—Ä–µ–∑ interface{} + –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤

func MaxAny(a, b any) any {  
	ai, ok := a.(int)  
	if !ok {  
		panic("not int")  
	}  
	bi, ok := b.(int)  
	if !ok {  
		panic("not int")  
	}  
	if ai > bi {  
		return ai  
	}  
	return bi  
}

–ú–∏–Ω—É—Å—ã:

- –Ω–µ—Ç —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    
- –Ω—É–∂–Ω–æ `.(type)` / `type switch` / reflect
    
- –∫–æ–¥ —Å–ª–æ–∂–Ω–µ–µ, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—à–∏–±–∫–∏ –Ω–∞ —Ä–∞–Ω—Ç–∞–π–º–µ
    

---

## –°—Ç–∞–ª–æ: generics (—Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ)

type Ordered interface {  
	~int | ~int64 | ~float64 | ~string  
}  
  
func Max[T Ordered](a, b T) T {  
	if a > b {  
		return a  
	}  
	return b  
}

---

# 2Ô∏è‚É£ –ë–∞–∑–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞: `[T any]`

## Generic-—Ñ—É–Ω–∫—Ü–∏—è

func Identity[T any](v T) T {  
	return v  
}

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

x := Identity  
y := Identity("hello") // —Ç–∏–ø –≤—ã–≤–µ–¥–µ—Ç—Å—è —Å–∞–º

---

# 3Ô∏è‚É£ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (constraints)

Constraints ‚Äî —ç—Ç–æ ‚Äú–∫–∞–∫–∏–µ —Ç–∏–ø—ã —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –¥–ª—è T‚Äù.

## –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π: `any`

func Print[T any](v T) {  
	fmt.Println(v)  
}

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞–±–æ—Ä–æ–º —Ç–∏–ø–æ–≤ (union)

type Number interface {  
	~int | ~int64 | ~float64  
}  
  
func Sum[T Number](a, b T) T {  
	return a + b  
}

### –ü–æ—á–µ–º—É `~int`, –∞ –Ω–µ `int`?

`~int` –æ–∑–Ω–∞—á–∞–µ—Ç: ‚Äúint –∏ –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–∏–ø—ã, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ int‚Äù.

type Age int  
  
func Demo() {  
	var a Age = 10  
	fmt.Println(Sum[Age](a, 5)) // —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ ~int  
}

---

# 4Ô∏è‚É£ Generic-—Ç–∏–ø—ã (—Å—Ç—Ä—É–∫—Ç—É—Ä—ã)

## –ü—Ä–∏–º–µ—Ä: Box[T]

type Box[T any] struct {  
	Value T  
}  
  
func NewBox[T any](v T) Box[T] {  
	return Box[T]{Value: v}  
}

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

b1 := NewBox(123)  
b2 := NewBox("go")

---

# 5Ô∏è‚É£ –ì–¥–µ generics —Ä–µ–∞–ª—å–Ω–æ –ø–æ–ª–µ–∑–Ω—ã

–í –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ —É —Ç–µ–±—è –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã —Ç–∏–ø–æ–≤—ã–µ –∑–∞–¥–∞—á–∏: —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, —Å—Ä–∞–≤–Ω–µ–Ω–∏—è, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, min/max, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

acbc5621-2c16-4c57-865d-fbabf32‚Ä¶

.

## 5.1 Min/Max

type Ordered interface {  
	~int | ~int64 | ~float64 | ~string  
}  
  
func Min[T Ordered](a, b T) T {  
	if a < b {  
		return a  
	}  
	return b  
}

---

## 5.2 –ü–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ —Å–ª–∞–π—Å–µ

func IndexOf[T comparable](xs []T, target T) int {  
	for i, v := range xs {  
		if v == target {  
			return i  
		}  
	}  
	return -1  
}

–ü–æ—á–µ–º—É `comparable`? –ü–æ—Ç–æ–º—É —á—Ç–æ –Ω—É–∂–µ–Ω `==`.

---

## 5.3 Set (–º–Ω–æ–∂–µ—Å—Ç–≤–æ)

type Set[T comparable] map[T]struct{}  
  
func NewSet[T comparable]() Set[T] {  
	return make(Set[T])  
}  
  
func (s Set[T]) Add(v T) {  
	s[v] = struct{}{}  
}  
  
func (s Set[T]) Has(v T) bool {  
	_, ok := s[v]  
	return ok  
}

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

s := NewSet[string]()  
s.Add("a")  
fmt.Println(s.Has("a")) // true

---

## 5.4 –û—á–µ—Ä–µ–¥—å (Queue)

type Queue[T any] struct {  
	items []T  
}  
  
func (q *Queue[T]) Push(v T) {  
	q.items = append(q.items, v)  
}  
  
func (q *Queue[T]) Pop() (T, bool) {  
	var zero T  
	if len(q.items) == 0 {  
		return zero, false  
	}  
	v := q.items[0]  
	q.items = q.items[1:]  
	return v, true  
}

---

# 6Ô∏è‚É£ Generics + –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤–º–µ—Å—Ç–µ

–≠—Ç–æ –≤–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç: generics –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –æ–Ω–∏ –¥–æ–ø–æ–ª–Ω—è—é—Ç.

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–∞–∫ constraint

type Stringer interface {  
	String() string  
}  
  
func JoinStrings[T Stringer](xs []T) string {  
	var b strings.Builder  
	for i, v := range xs {  
		if i > 0 {  
			b.WriteString(", ")  
		}  
		b.WriteString(v.String())  
	}  
	return b.String()  
}

---

# 7Ô∏è‚É£ –ö–æ–≥–¥–∞ –ù–ï –Ω–∞–¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å generics

‚úÖ Generics —Ö–æ—Ä–æ—à–∏, –∫–æ–≥–¥–∞:

- –∞–ª–≥–æ—Ä–∏—Ç–º –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ
    
- —Ç–∏–ø—ã –æ—Ç–ª–∏—á–∞—é—Ç—Å—è
    
- –≤–∞–∂–Ω–∞ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    

‚ùå Generics —á–∞—â–µ –≤—Ä–µ–¥–Ω—ã, –∫–æ–≥–¥–∞:

- —Ç–∏–ø —Ä–µ–∞–ª—å–Ω–æ –æ–¥–∏–Ω, –∞ —Ç—ã ‚Äú–Ω–∞ –±—É–¥—É—â–µ–µ‚Äù —É—Å–ª–æ–∂–Ω—è–µ—à—å
    
- –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
    
- –≥–µ–Ω–µ—Ä–∞–ª–∏–∑–∞—Ü–∏—è —É–±–∏–≤–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å
    

–•–æ—Ä–æ—à–µ–µ –ø—Ä–∞–≤–∏–ª–æ:

> –ï—Å–ª–∏ generics –Ω–µ —É–º–µ–Ω—å—à–∏–ª–∏ –∫–æ–¥ –∏ –Ω–µ —É–ø—Ä–æ—Å—Ç–∏–ª–∏ ‚Äî —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –æ–Ω–∏ –Ω–µ –Ω—É–∂–Ω—ã.

---

# 8Ô∏è‚É£ –ü–æ–ª–µ–∑–Ω—ã–µ –ø–∞–∫–µ—Ç—ã —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π/–ø–æ—á—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∞–∑—ã

–í –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è `golang.org/x/exp/slices` –∫–∞–∫ ‚Äú–ø–æ—á—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞‚Äù

acbc5621-2c16-4c57-865d-fbabf32‚Ä¶

.

## slices (Go 1.21+ –µ—Å—Ç—å –≤ std: `slices`)

–ü—Ä–∏–º–µ—Ä—ã:

// slices.Contains([]int{1,2,3}, 2) -> true  
// slices.Sort([]int{3,1,2})

–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã:

- [[–ü–∞–∫–µ—Ç slices]]
    
- [[–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤ Go]]
    
- [[Comparable –∏ Ordered]]
    

---

# 9Ô∏è‚É£ –ú–∏–Ω–∏-–ø–∞–º—è—Ç–∫–∞ –ø–æ constraints

- `any` ‚Äî –ª—é–±–æ–π —Ç–∏–ø
    
- `comparable` ‚Äî –º–æ–∂–Ω–æ `==` –∏ `!=`
    
- `~T` ‚Äî ‚Äú—Ç–∏–ø –∏ –≤—Å–µ –µ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ‚Äù
    
- `A | B | C` ‚Äî union —Ç–∏–ø–æ–≤
    
- interface —Å –º–µ—Ç–æ–¥–∞–º–∏ ‚Äî constraint –ø–æ –ø–æ–≤–µ–¥–µ–Ω–∏—é
    

---

# ‚úÖ –ò—Ç–æ–≥

Generics –≤ Go ‚Äî —ç—Ç–æ –ø—Ä–æ:

- —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã
    
- —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (queue, stack, set, tree)
    
- —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    
- —É–º–µ–Ω—å—à–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞