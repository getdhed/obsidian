
## –ß—Ç–æ —Ç–∞–∫–æ–µ gRPC

gRPC ‚Äî —ç—Ç–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä (RPC), —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π Google.

–ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è:

> –í—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ —Ç–∞–∫, –±—É–¥—Ç–æ —ç—Ç–æ –æ–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö:

- [[HTTP2]]
    
- [[TCP]]
    
- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç [[Protocol Buffers]]
    

---

# üß† –ß—Ç–æ —Ç–∞–∫–æ–µ RPC

RPC (Remote Procedure Call) ‚Äî —ç—Ç–æ –º–æ–¥–µ–ª—å:

–ö–ª–∏–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é ‚Üí —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–¢—ã –ø–∏—à–µ—à—å:

user, err := client.GetUser(ctx, request)

–ù–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ:

- —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–µ—Ç–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å
    
- —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ Protobuf
    
- –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ HTTP/2
    
- —Å–µ—Ä–≤–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–µ—Ç–æ–¥
    
- –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ
    

---

# üß± –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω gRPC

## 1Ô∏è‚É£ –û–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –≤ .proto

syntax = "proto3";  
  
service UserService {  
  rpc GetUser (UserRequest) returns (UserResponse);  
}  
  
message UserRequest {  
  int32 id = 1;  
}  
  
message UserResponse {  
  int32 id = 1;  
  string name = 2;  
}

–≠—Ç–æ:

- —Å—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö
    
- –∫–æ–Ω—Ç—Ä–∞–∫—Ç API
    
- –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤
    

---

## 2Ô∏è‚É£ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞

protoc --go_out=. --go-grpc_out=. user.proto

–ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è:

- —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
    
- –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–µ—Ä–≤–∏—Å–∞
    
- –∫–ª–∏–µ–Ω—Ç
    

---

## 3Ô∏è‚É£ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞

type server struct {  
    pb.UnimplementedUserServiceServer  
}  
  
func (s *server) GetUser(ctx context.Context, req *pb.UserRequest) (*pb.UserResponse, error) {  
    return &pb.UserResponse{  
        Id:   req.Id,  
        Name: "Nazar",  
    }, nil  
}

---

## 4Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

lis, _ := net.Listen("tcp", ":50051")  
grpcServer := grpc.NewServer()  
pb.RegisterUserServiceServer(grpcServer, &server{})  
grpcServer.Serve(lis)

---

## 5Ô∏è‚É£ –ö–ª–∏–µ–Ω—Ç

conn, _ := grpc.Dial("localhost:50051", grpc.WithInsecure())  
client := pb.NewUserServiceClient(conn)  
  
resp, _ := client.GetUser(ctx, &pb.UserRequest{Id: 1})

---

# üåê –ü–æ—á–µ–º—É HTTP/2

gRPC –∏—Å–ø–æ–ª—å–∑—É–µ—Ç [[HTTP2]], –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- Multiplexing (–Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –æ–¥–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏)
    
- Streaming
    
- –ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö
    

HTTP/1.1 –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —ç—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

---

# üì° –¢–∏–ø—ã –≤—ã–∑–æ–≤–æ–≤ –≤ gRPC

## 1Ô∏è‚É£ Unary (–æ–±—ã—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç)

–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π RPC.

---

## 2Ô∏è‚É£ Server Streaming

–°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö.

---

## 3Ô∏è‚É£ Client Streaming

–ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö.

---

## 4Ô∏è‚É£ Bidirectional Streaming

–û–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –ø–æ—Ç–æ–∫–∞–º–∏.

–≠—Ç–æ –º–æ—â–Ω–µ–µ, —á–µ–º –æ–±—ã—á–Ω—ã–π [[REST API]].

---

# üî• gRPC vs REST

|REST|gRPC|
|---|---|
|HTTP/1.1|HTTP/2|
|JSON|Protobuf|
|–¢–µ–∫—Å—Ç|–ë–∏–Ω–∞—Ä–Ω—ã–π|
|–ß–∏—Ç–∞–µ–º—ã–π|–ë—ã—Å—Ç—Ä—ã–π|
|–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞|–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤|

---

# üß† –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å gRPC

–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:

- –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
    
- –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –æ–±—â–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
    
- high-load —Å–∏—Å—Ç–µ–º
    
- real-time —Å—Ç—Ä–∏–º–∏–Ω–≥–∞
    

–ù–µ –æ—á–µ–Ω—å –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:

- –ø—É–±–ª–∏—á–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö API (–±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
    
- –ø—Ä–æ—Å—Ç—ã—Ö CRUD-—Å–µ—Ä–≤–∏—Å–æ–≤
    

---

# üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑:

- [[TLS]]
    
- mTLS
    

---

# üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã

- [[Protocol Buffers]]
    
- [[HTTP2]]
    
- [[TCP]]
    
- [[Socket]]
    
- [[REST API]]
    
- [[Context]]
    
- [[Microservices]]
    

---

# üìå –ì–ª–∞–≤–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ

gRPC ‚Äî —ç—Ç–æ:

> –°—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±—â–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ —É–¥–∞–ª—ë–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π.

–û–Ω —Å–∫—Ä—ã–≤–∞–µ—Ç —Å–µ—Ç–µ–≤—É—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏ –¥–∞—ë—Ç –æ—â—É—â–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞.

---

# üíé –ò–Ω—Å–∞–π—Ç –¥–ª—è —Ç–µ–±—è

–ö–æ–≥–¥–∞ —Ç—ã –ø–∏—à–µ—à—å:

client.GetUser(...)

–¢—ã –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –∑–∞–ø—É—Å–∫–∞–µ—à—å:

- —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é
    
- HTTP/2 —Ñ—Ä–µ–π–º–∏–Ω–≥
    
- TCP –ø–µ—Ä–µ–¥–∞—á—É
    
- –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é
    

–ò –≤—Å—ë —ç—Ç–æ —Å–∫—Ä—ã—Ç–æ –ø–æ–¥ –∫—Ä–∞—Å–∏–≤—ã–º API.