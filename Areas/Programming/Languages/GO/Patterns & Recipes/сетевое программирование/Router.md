# üß≠ Router –≤ Go

## –ß—Ç–æ —Ç–∞–∫–æ–µ Router

Router ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –≤—Ö–æ–¥—è—â–µ–≥–æ HTTP-–∑–∞–ø—Ä–æ—Å–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º handler‚Äô–æ–º.

–ì–ª–∞–≤–Ω–∞—è –∑–∞–¥–∞—á–∞:

> –ü–æ URL + –º–µ—Ç–æ–¥—É –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤—ã–∑–≤–∞—Ç—å.

–°–≤—è–∑–∞–Ω–æ —Å:

- [[HTTP]]
    
- [[Middleware]]
    
- [[REST API]]
    

---

# üß± –î–µ—Ñ–æ–ª—Ç–Ω—ã–π Router –≤ Go ‚Äî `net/http`

–í —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ServeMux`.

---

## üìå –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä

package main  
  
import (  
	"fmt"  
	"net/http"  
)  
  
func main() {  
	http.HandleFunc("/", homeHandler)  
	http.HandleFunc("/users", usersHandler)  
  
	http.ListenAndServe(":8080", nil)  
}  
  
func homeHandler(w http.ResponseWriter, r *http.Request) {  
	fmt.Fprintln(w, "Home")  
}  
  
func usersHandler(w http.ResponseWriter, r *http.Request) {  
	fmt.Fprintln(w, "Users")  
}

–ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å `nil` –≤ `ListenAndServe`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `http.DefaultServeMux`.

---

# üß† –ß—Ç–æ —Ç–∞–∫–æ–µ ServeMux

–≠—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç:

map[path]handler

–û–Ω–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç URL —Å handler‚Äô–æ–º.

---

# üèó –Ø–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ ServeMux

–õ—É—á—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π mux.

mux := http.NewServeMux()  
  
mux.HandleFunc("/", homeHandler)  
mux.HandleFunc("/users", usersHandler)  
  
http.ListenAndServe(":8080", mux)

–≠—Ç–æ –±–æ–ª–µ–µ —á–∏—Å—Ç—ã–π –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥.

---

# üìå –í–∞–∂–Ω–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å ServeMux

ServeMux:

- –Ω–µ —É–º–µ–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏
    
- –Ω–µ —É–º–µ–µ—Ç group
    
- –Ω–µ —É–º–µ–µ—Ç middleware per-route
    
- –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ path
    
- –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç HTTP-–º–µ—Ç–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    

---

# ‚ùó –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–æ–¥–∞ –≤—Ä—É—á–Ω—É—é

func usersHandler(w http.ResponseWriter, r *http.Request) {  
	if r.Method != http.MethodGet {  
		http.Error(w, "Method not allowed", http.StatusMethodNotAllowed)  
		return  
	}  
  
	fmt.Fprintln(w, "Users")  
}

---

# üîé –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç matching

ServeMux –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:

- —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
    
- –∏–ª–∏ longest-prefix match
    

–ü—Ä–∏–º–µ—Ä:

mux.HandleFunc("/users/", userHandler)

–ü–æ–¥–æ–π–¥—ë—Ç –¥–ª—è:

/users/1  
/users/42

–ù–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–¥—ë—Ç—Å—è –ø–∞—Ä—Å–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

id := r.URL.Path[len("/users/"):]

–≠—Ç–æ –Ω–µ—É–¥–æ–±–Ω–æ.

---

# üîÅ Middleware + ServeMux

handler := LoggingMiddleware(mux)  
http.ListenAndServe(":8080", handler)

---

# üö´ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞

–î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ ‚Äî –Ω–æ—Ä–º.

–ù–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ REST API –Ω–µ—É–¥–æ–±–Ω–æ:

- –Ω–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø—É—Ç–∏
    
- –Ω–µ—Ç –≥—Ä—É–ø–ø
    
- –Ω–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ –º–µ—Ç–æ–¥–∞–º
    
- –Ω–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ middleware –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ä–æ—É—Ç–æ–≤
    

---

# üöÄ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ Router-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏

## üîπ chi

–û—á–µ–Ω—å –ª—ë–≥–∫–∏–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π router.

import "github.com/go-chi/chi/v5"  
  
r := chi.NewRouter()  
  
r.Get("/", homeHandler)  
r.Get("/users/{id}", getUserHandler)  
  
http.ListenAndServe(":8080", r)

–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:

id := chi.URLParam(r, "id")

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- –≥—Ä—É–ø–ø—ã
    
- middleware
    
- —á–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
    

–°–≤—è–∑–∞–Ω–æ —Å:

- [[Middleware]]
    
- [[REST API]]
    

---

## üîπ gorilla/mux (–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω)

–†–∞–Ω—å—à–µ –±—ã–ª –æ—á–µ–Ω—å –ø–æ–ø—É–ª—è—Ä–µ–Ω.

r := mux.NewRouter()  
r.HandleFunc("/users/{id}", handler).Methods("GET")

–ù–æ —Å–µ–π—á–∞—Å –ø—Ä–æ–µ–∫—Ç –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω.

---

## üîπ echo

–ë–æ–ª–µ–µ —Ç—è–∂—ë–ª—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫.

- –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π router
    
- middleware
    
- –≤–∞–ª–∏–¥–∞—Ü–∏—è
    
- —É–¥–æ–±–Ω—ã–π API
    

---

## üîπ gin

–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫.

r := gin.Default()  
r.GET("/users/:id", handler)

–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è production REST API.

---

# üß† –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ

|–°—Ü–µ–Ω–∞—Ä–∏–π|Router|
|---|---|
|–ú–∞–ª–µ–Ω—å–∫–∏–π —Å–µ—Ä–≤–∏—Å|net/http|
|–ß–∏—Å—Ç—ã–π REST|chi|
|–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞|gin|
|Legacy –ø—Ä–æ–µ–∫—Ç—ã|gorilla|

---

# üìå –ö–∞–∫ —Ä–æ—É—Ç–µ—Ä —Å–≤—è–∑–∞–Ω —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

Router –æ–±—ã—á–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤:

Delivery Layer (HTTP Layer)

–°–≤—è–∑–∞–Ω —Å:

- [[Controller]]
    
- [[Middleware]]
    
- [[Context]]
    
- [[Dependency Injection]]
    

---

# üíé –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º

–ö–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å:

1. TCP –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
    
2. HTTP –ø–∞—Ä—Å–∏—Ç –∑–∞–ø—Ä–æ—Å
    
3. Router –∏—â–µ—Ç handler
    
4. Middleware –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç handler
    
5. Handler –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
    
6. –û—Ç–≤–µ—Ç —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è ([[JSON]])
    

---

# üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã

- [[HTTP]]
    
- [[Middleware]]
    
- [[Context]]
    
- [[REST API]]
    
- [[JSON]]
    
- [[TCP]]
    
- [[Dependency Injection]]
    
- [[Clean Architecture]]
    
- [[Chi Router]]
    
- [[Gin]]
    
- [[Echo]]
    
- [[Gorilla Mux]]
    

---

# üìå –ì–ª–∞–≤–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ

Router ‚Äî —ç—Ç–æ:

> –ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ.

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π router ‚Äî –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π.  
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ ‚Äî –¥–æ–±–∞–≤–ª—è—é—Ç —É–¥–æ–±—Å—Ç–≤–æ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å.