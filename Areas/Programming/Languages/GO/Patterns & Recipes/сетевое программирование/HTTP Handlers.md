
# Handlers (Go net/http)

## 1. –ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è

–í—Å—è HTTP-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤ Go —Å—Ç—Ä–æ–∏—Ç—Å—è –≤–æ–∫—Ä—É–≥ –æ–¥–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:

type Handler interface {  
	ServeHTTP(ResponseWriter, *Request)  
}

–°–µ—Ä–≤–µ—Ä—É –≤–æ–æ–±—â–µ –Ω–µ –≤–∞–∂–Ω–æ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç—ã –ø–µ—Ä–µ–¥–∞—ë—à—å –≤ `ListenAndServe`.

–ï–º—É –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ ‚Äî –æ–±—ä–µ–∫—Ç —Å –º–µ—Ç–æ–¥–æ–º:

ServeHTTP(w http.ResponseWriter, r *http.Request)

---

## 2. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç ListenAndServe

–ö–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç HTTP-–∑–∞–ø—Ä–æ—Å, —Å–µ—Ä–≤–µ—Ä:

1. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
    
2. –ü–∞—Ä—Å–∏—Ç HTTP
    
3. –°–æ–∑–¥–∞—ë—Ç `Request`
    
4. –í—ã–∑—ã–≤–∞–µ—Ç:
    

handler.ServeHTTP(w, r)

–í–°–Å.

–í–µ—Å—å net/http –¥–ª—è –Ω–∞—Å —Å–≤–æ–¥–∏—Ç—Å—è –∫ –≤—ã–∑–æ–≤—É `ServeHTTP`.

---

## 3. –ü—Ä–æ—Å—Ç–µ–π—à–∏–π Handler

type MyHandler struct{}  
  
func (h MyHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) {  
	w.Write([]byte("Hello"))  
}  
  
func main() {  
	http.ListenAndServe(":8080", MyHandler{})  
}

–ú—ã –Ω–∞–ø—Ä—è–º—É—é –ø–µ—Ä–µ–¥–∞–ª–∏ —Å–µ—Ä–≤–µ—Ä—É –æ–±—ä–µ–∫—Ç —Å `ServeHTTP`.

---

## 4. HandlerFunc ‚Äî —É–¥–æ–±–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞

–í Go –µ—Å—Ç—å —Ç–∏–ø:

type HandlerFunc func(ResponseWriter, *Request)

–ò —É –Ω–µ–≥–æ –µ—Å—Ç—å –º–µ—Ç–æ–¥:

func (f HandlerFunc) ServeHTTP(w ResponseWriter, r *Request) {  
	f(w, r)  
}

–ü–æ—ç—Ç–æ–º—É –æ–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:

func hello(w http.ResponseWriter, r *http.Request)

–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∞ –≤ `http.Handler`:

http.HandlerFunc(hello)

–≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –∞–¥–∞–ø—Ç–µ—Ä –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏–µ–π –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

---

## 5. –ß—Ç–æ —Ç–∞–∫–æ–µ mux

`http.ServeMux` ‚Äî —ç—Ç–æ —Ç–æ–∂–µ `Handler`.

–ü–æ —Å—É—Ç–∏ —ç—Ç–æ:

- —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
    
- –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
    
- –≤ `ServeHTTP` –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –Ω—É–∂–Ω—ã–π handler
    

–£–ø—Ä–æ—â—ë–Ω–Ω–æ:

func (m *ServeMux) ServeHTTP(w, r) {  
	handler := m.match(r.URL.Path)  
	handler.ServeHTTP(w, r)  
}

–¢–æ –µ—Å—Ç—å mux ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ä–æ—É—Ç–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å–∞–º —Ä–µ–∞–ª–∏–∑—É–µ—Ç `ServeHTTP`.

üìå –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [[Router]]

---

## 6. Middleware ‚Äî —ç—Ç–æ —Ç–æ–∂–µ Handler

Middleware ‚Äî —ç—Ç–æ –æ–±—ë—Ä—Ç–∫–∞ –≤–æ–∫—Ä—É–≥ handler.

–ü—Ä–∏–º–µ—Ä:

func Logging(next http.Handler) http.Handler {  
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {  
		fmt.Println("Start")  
  
		next.ServeHTTP(w, r)  
  
		fmt.Println("End")  
	})  
}

–ó–¥–µ—Å—å:

- middleware –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `Handler`
    
- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π `Handler`
    
- –≤–Ω—É—Ç—Ä–∏ –≤—ã–∑—ã–≤–∞–µ—Ç `next.ServeHTTP`
    

–≠—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω **Decorator**.

üìå –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [[Middleware]]

---

## 7. –ö–∞–∫ —Å—Ç—Ä–æ–∏—Ç—Å—è —Ü–µ–ø–æ—á–∫–∞

handler := Logging(Auth(mux))

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—É–¥–µ—Ç —Ç–∞–∫–æ–π:

Logging  
   ‚Üì next  
Auth  
   ‚Üì next  
mux  
   ‚Üì  
–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π handler

–ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:

Logging ‚Üí Auth ‚Üí mux ‚Üí handler

–ö–∞–∂–¥—ã–π —Å–ª–æ–π –ø—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç `next.ServeHTTP`.

---

## 8. –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü–æ—Ç–æ–º—É —á—Ç–æ:

- mux —Ä–µ–∞–ª–∏–∑—É–µ—Ç `Handler`
    
- middleware —Ä–µ–∞–ª–∏–∑—É–µ—Ç `Handler`
    
- –ª—é–±–æ–π –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –º–æ–∂–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `Handler`
    

–ê —Å–µ—Ä–≤–µ—Ä—É –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ:

ServeHTTP

–≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π.

---

## 9. –ö–ª—é—á–µ–≤–æ–π –≤—ã–≤–æ–¥

–í Go:

> –í–°–Å ‚Äî —ç—Ç–æ http.Handler

- –û–¥–∏–Ω —Ö–µ–Ω–¥–ª–µ—Ä
    
- –†–æ—É—Ç–µ—Ä
    
- Middleware
    
- –¶–µ–ø–æ—á–∫–∞ middleware
    
- –î–∞–∂–µ –∫–∞—Å—Ç–æ–º–Ω—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä
    

–ï—Å–ª–∏ –µ—Å—Ç—å `ServeHTTP`, —Å–µ—Ä–≤–µ—Ä —Å–º–æ–∂–µ—Ç —ç—Ç–æ –≤—ã–∑–≤–∞—Ç—å.

---

## 10. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ

–í—Å—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–∑–∏—Ü–∏—é:

Handler  
    –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è  
        –¥—Ä—É–≥–∏–º Handler  
            –∫–æ—Ç–æ—Ä—ã–π –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è  
                –µ—â—ë –æ–¥–Ω–∏–º Handler

–≠—Ç–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –º–æ–¥–µ–ª—å.

Middleware ‚Äî —ç—Ç–æ –Ω–µ –º–∞–≥–∏—è.  
–≠—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–ª–æ–π, –∫–æ—Ç–æ—Ä—ã–π:

1. –î–µ–ª–∞–µ—Ç —á—Ç–æ-—Ç–æ –î–û
    
2. –í—ã–∑—ã–≤–∞–µ—Ç next
    
3. –î–µ–ª–∞–µ—Ç —á—Ç–æ-—Ç–æ –ü–û–°–õ–ï
    

---

## 11. –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

- [[Router]] ‚Äî –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
    
- [[Middleware]] ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ –≤ HTTP
    
- [[HTTP]] ‚Äî –æ–±—â–∏–π –æ–±–∑–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
    
- [[REST API]] ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ API –ø–æ–≤–µ—Ä—Ö HTTP
    
- [[ResponseWriter]] ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –æ—Ç–≤–µ—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–∞
    
- [[Context]] ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ –∑–∞–ø—Ä–æ—Å–∞
    

---

## 12. –ì–ª–∞–≤–Ω–∞—è –º—ã—Å–ª—å

Go –Ω–µ —Å—Ç—Ä–æ–∏—Ç –º–∞–≥–∏—é.  
–û–Ω —Å—Ç—Ä–æ–∏—Ç —Å–∏—Å—Ç–µ–º—É –≤–æ–∫—Ä—É–≥ –æ–¥–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

`ServeHTTP` ‚Äî —ç—Ç–æ —Ç–æ—á–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤—Å–µ–π HTTP-—Å–∏—Å—Ç–µ–º—ã.