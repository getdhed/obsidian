# üöÄ

> –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –Ω–µ ‚Äú–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –∫–æ–¥—É‚Äù.  
> –≠—Ç–æ **—á–∞—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**. –ï—Å–ª–∏ –∫–æ–¥ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å ‚Äî –æ–Ω –ø–ª–æ—Ö–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω.

---

# üèî Testing Pyramid

–ò–¥–µ—è –ø—Ä–æ—Å—Ç–∞—è –∏ –≥–µ–Ω–∏–∞–ª—å–Ω–∞—è:

        üî∫ E2E  
      üî∏ Integration  
    üîπüîπüîπ Unit

### üîπ Unit Tests (–æ—Å–Ω–æ–≤–∞–Ω–∏–µ)

–°–∞–º—ã–µ –¥–µ—à—ë–≤—ã–µ, –±—ã—Å—Ç—Ä—ã–µ –∏ –º–∞—Å—Å–æ–≤—ã–µ.  
–¢–µ—Å—Ç–∏—Ä—É—é—Ç **–º–∞–ª–µ–Ω—å–∫–∏–µ –∫—É—Å–∫–∏ –ª–æ–≥–∏–∫–∏**: —Ñ—É–Ω–∫—Ü–∏–∏, –º–µ—Ç–æ–¥—ã, —á–∏—Å—Ç—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.

–ë–µ–∑:

- —Å–µ—Ç–∏
    
- —Ñ–∞–π–ª–æ–≤
    
- –±–∞–∑—ã
    
- —Ä–µ–∞–ª—å–Ω—ã—Ö API
    

‚ö° –ë—ã—Å—Ç—Ä–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è  
‚ö° –õ–µ–≥–∫–æ –ø–∏—Å–∞—Ç—å  
‚ö° –î–æ–ª–∂–Ω—ã —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å ~70‚Äì80% —Ç–µ—Å—Ç–æ–≤

---

### üî∏ Integration Tests (—Å–µ—Ä–µ–¥–∏–Ω–∞)

–ü—Ä–æ–≤–µ—Ä—è—é—Ç **–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**.

–ù–∞–ø—Ä–∏–º–µ—Ä:

- HTTP handler + router + middleware
    
- –†–∞–±–æ—Ç–∞ —Å –ë–î
    
- –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
    
- –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (—á–µ—Ä–µ–∑ fake/test containers)
    

–û–Ω–∏:

- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ
    
- –¢—Ä–µ–±—É—é—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è
    
- –õ–æ–≤—è—Ç –±–∞–≥–∏ ‚Äú–Ω–∞ —Å—Ç—ã–∫–∞—Ö‚Äù
    

---

### üî∫ E2E Tests (–≤–µ—Ä—Ö)

–¢–µ—Å—Ç–∏—Ä—É—é—Ç —Å–∏—Å—Ç–µ–º—É **—Ü–µ–ª–∏–∫–æ–º**.

–ü—Ä–∏–º–µ—Ä:

- –ü–æ–¥–Ω—è–ª–∏ —Å–µ—Ä–≤–µ—Ä
    
- –°–¥–µ–ª–∞–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–π HTTP –∑–∞–ø—Ä–æ—Å
    
- –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
    

–≠—Ç–æ:

- –ú–µ–¥–ª–µ–Ω–Ω–æ
    
- –ò–Ω–æ–≥–¥–∞ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ
    
- –ù–æ –¥–∞—ë—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —á—Ç–æ –≤—Å—ë —Ä–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
    

---

# üí° –ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ

> –ú–Ω–æ–≥–æ Unit  
> –ú–µ–Ω—å—à–µ Integration  
> –ú–∏–Ω–∏–º—É–º E2E  
> –ù–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

---

# üß† Unit Testing –≤ Go

Go –¥–∞—ë—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–∞–∫–µ—Ç:

[[Testing]]

–ü—Ä–∏–º–µ—Ä:

func TestSum(t *testing.T) {  
    result := Sum(2, 3)  
    if result != 5 {  
        t.Errorf("expected 5, got %d", result)  
    }  
}

–§–∞–π–ª –¥–æ–ª–∂–µ–Ω –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è:

something_test.go

–ó–∞–ø—É—Å–∫:

go test ./...

---

# üß™ Table-Driven Tests (must know!)

–°–∞–º—ã–π –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω—ã–π —Å—Ç–∏–ª—å –≤ Go:

func TestSum(t *testing.T) {  
    tests := []struct{  
        a, b int  
        expected int  
    }{  
        {2, 3, 5},  
        {0, 0, 0},  
        {-1, 1, 0},  
    }  
  
    for _, tt := range tests {  
        result := Sum(tt.a, tt.b)  
        if result != tt.expected {  
            t.Errorf("got %d, want %d", result, tt.expected)  
        }  
    }  
}

–≠—Ç–æ:

- –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ
    
- —á–∏—Ç–∞–µ–º–æ
    
- –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ
    

---

# üîÅ Subtests

t.Run("positive numbers", func(t *testing.T) {})

–ü–æ–∑–≤–æ–ª—è–µ—Ç:

- –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –∫–µ–π—Å—ã
    
- –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—ã–±–æ—Ä–æ—á–Ω–æ
    
- –¥–µ–ª–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
    

---

# üßµ Parallel Tests

t.Parallel()

–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è,  
–Ω–æ –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å [[Concurrency]].

---

# üé≠ Mocks –∏ Fakes

–ö–æ–≥–¥–∞ –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:

- –±–∞–∑–∞
    
- HTTP –∫–ª–∏–µ–Ω—Ç
    
- –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å
    

–ò—Å–ø–æ–ª—å–∑—É–µ–º:

- –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
    
- –º–æ–∫–∏
    
- —Ñ–µ–π–∫–∏
    

–°–≤—è–∑–∞–Ω–æ —Å:  
[[Interfaces]]  
[[Dependency Injection]]

---

# üåê HTTP Testing

Go –¥–∞—ë—Ç:

[[net/http/httptest]]

–ü—Ä–∏–º–µ—Ä:

req := httptest.NewRequest(http.MethodGet, "/users", nil)  
rec := httptest.NewRecorder()  
  
handler.ServeHTTP(rec, req)  
  
if rec.Code != http.StatusOK {  
    t.Fatalf("expected 200, got %d", rec.Code)  
}

–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è:

- middleware
    
- router
    
- handler —Ç–µ—Å—Ç–æ–≤
    

–°–≤—è–∑–∞–Ω–æ —Å:  
[[HTTP]]  
[[Middleware]]  
[[Router]]

---

# üì¶ Coverage

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ:

go test -cover

–° HTML –æ—Ç—á—ë—Ç–æ–º:

go test -coverprofile=cover.out  
go tool cover -html=cover.out

‚ö†Ô∏è –ù–æ 100% coverage ‚â† —Ö–æ—Ä–æ—à–∏–π –∫–æ–¥.

---

# üß® Common mistakes

- –¢–µ—Å—Ç—ã, –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏
    
- –¢–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π —Å–µ—Ç—å—é
    
- –¢–µ—Å—Ç—ã, –∑–∞–≤–∏—Å—è—â–∏–µ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
    
- –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ E2E –≤–º–µ—Å—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö unit
    

---

# üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã

[[Testing]]  
[[Unit Testing]]  
[[Integration Testing]]  
[[End-to-End Testing]]  
[[Table-Driven Tests]]  
[[Mocks]]  
[[Dependency Injection]]  
[[Interfaces]]  
[[Concurrency]]  
[[HTTP]]  
[[net/http]]  
[[httptest]]  
[[Benchmarking]]  
[[Race Detector]]